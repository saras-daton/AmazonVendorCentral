version: 2
models:
  - name: NetPureProductMarginReport
    description: NetPureProductMarginReport
    config: 
      materialized: 'incremental'
      incremental_strategy: 'merge'
      partition_by: {'field': 'startDate', 'data_type': 'date'}
      cluster_by: ['startDate' , 'asin']
      unique_key: ['startDate' , 'asin']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - startDate
            - asin
    columns:
      - name: startDate
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1

  - name: RetailProcurementOrdersStatus
    description: RetailProcurementOrdersStatus
    config:
      materialized: 'incremental'
      incremental_strategy: 'merge'
      partition_by: {'field': 'purchaseOrderDate', 'data_type': 'timestamp', 'granularity': 'day'}
      cluster_by: ['purchaseOrderNumber']
      unique_key: ['purchaseOrderDate','purchaseOrderNumber','purchaseOrderStatus','buyerProductIdentifier']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - purchaseOrderDate
            - purchaseOrderNumber
            - purchaseOrderStatus
            - buyerProductIdentifier
    columns:
      - name: purchaseOrderDate
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1

  - name: VendorInventoryReportByManufacturing
    description: VendorInventoryReportByManufacturing
    config:
      materialized: 'incremental'
      incremental_strategy: 'merge'
      partition_by: {'field': 'startDate', 'data_type': 'date'}
      cluster_by: ['startDate', 'asin']
      unique_key: ['marketplaceId','startDate', 'asin']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - startDate
            - marketplaceId
            - asin
    columns:
      - name: startDate
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1

  - name: VendorInventoryReportBySourcing
    description: VendorInventoryReportBySourcing
    config:
      materialized: 'incremental'
      incremental_strategy: 'merge'
      partition_by: {'field': 'startDate', 'data_type': 'date'}
      cluster_by: ['startDate', 'asin']
      unique_key: ['marketplaceId','startDate', 'asin']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - startDate
            - marketplaceId
            - asin
    columns:
      - name: startDate
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1

  - name: VendorSalesReportByManufacturing
    description: VendorSalesReportByManufacturing
    config:
      materialized: 'incremental'
      incremental_strategy: 'merge'
      partition_by: {'field': 'startDate', 'data_type': 'date'}
      cluster_by: ['startDate' , 'asin']
      unique_key: ['marketplaceId','startDate' , 'asin']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - startDate
            - marketplaceId
            - asin
    columns:
      - name: startDate
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1

  - name: VendorSalesReportBySourcing
    description: VendorSalesReportBySourcing
    config:
      materialized: 'incremental'
      incremental_strategy: 'merge'
      partition_by: {'field': 'startDate', 'data_type': 'date'}
      cluster_by: ['marketplaceId','startDate' , 'asin']
      unique_key: ['marketplaceId','startDate' , 'asin']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - startDate
            - marketplaceId
            - asin
    columns:
      - name: startDate
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1

  - name: VendorTrafficReport
    description: VendorTrafficReport
    config: 
      materialized: 'incremental'
      incremental_strategy: 'merge' 
      partition_by: {'field': 'startDate', 'data_type': 'date'}
      cluster_by: ['startDate' , 'asin'] 
      unique_key: ['startDate' , 'asin']
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - startDate
            - asin
    columns:
      - name: startDate
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1